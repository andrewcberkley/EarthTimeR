#https://towardsdatascience.com/easy-text-analysis-on-abc-news-headlines-b434e6e3b5b8
#https://github.com/news-r/textanalysis
library(data.table)
library(tidyverse)
#https://stackoverflow.com/questions/56975567/r-how-to-parse-pretty-printed-json-with-newlines-within-character-strings
json <- "C:/Users/ABERK/Desktop/wef-2n/1245.json"
n2 <- paste(readLines(json), collapse = "")
if (grepl("\\}\\s*\\{", n2))
n2 <- paste0("[", gsub("\\}\\s*\\{", "},{", n2), "]")
my_list <- jsonlite::fromJSON(n2, simplifyDataFrame = FALSE)
df <- rbindlist(my_list, fill = TRUE, idcol = "id")
long <- reshape2::melt(df, id.vars = c("id"))
long1 <- long[!(long$value=="NULL"),]
long1a <- long1[,-c(1)]
colnames(long1a) <- c("date", "layout")
#https://stackoverflow.com/questions/49689927/unnest-a-list-column-directly-into-several-columns
long2 <- unnest_wider(long1a, layout)
long3 <- unnest_wider(long2, text)
clean_df12 <- long3[,c(1,3:5)]
#rm(list=setdiff(ls(), "clean_df"))
#headline_data <- clean_df[,2]
#body_data <- clean_df[,4]
#https://towardsdatascience.com/easy-text-analysis-on-abc-news-headlines-b434e6e3b5b8
rm(df)
rm(long)
rm(long1)
rm(long1a)
rm(long2)
rm(long3)
rm(my_list)
merged_df <- Reduce(function(x, y) merge(x, y, all=TRUE), list(clean_df1, clean_df2, clean_df3, clean_df4, clean_df5, clean_df6, clean_df7, clean_df8, clean_df9, clean_df10, clean_df11, clean_df12))
save(merged_df,file="2n_merged_data.Rda")
rm(list=setdiff(ls(), "merged_df"))
head(merged_df)
head(merged_df$date)
View(merged_df)
merged_df2 <- merged_df[!(merged_df$body=="NULL"),]
merged_df2 <- merged_df[!(merged_df$body=="NA"),]
merged_df2  <- merged_df[complete.cases(merged_df), ]
save(merged_df,file="2n_merged_data.Rda")
save(merged_df2,file="2n_merged_data.Rda")
View(merged_df2)
rm(merged_df)
climate_change <- dplyr::filter(merged_df2, !grepl("climate change",body))
?filter
View(merged_df2)
View(climate_change)
climate_change <- dplyr::filter(merged_df2, grepl("climate change",body))
climate_change <- dplyr::filter(merged_df2, grepl("climate change", body))
View(climate_change)
write.csv(climate_change, "2n_climate_change.csv", row.names = FALSE, NA = "")
write.csv(climate_change, "2n_climate_change.csv", row.names = FALSE, na = "")
library(qdap)
myCorpus <- read.csv("C:/Users/ABERK/Desktop/wef-2n/2n_climate_change.csv")
titlengrams <- ngrams(myCorpus$title, seq_along(myCorpus$title), 5)
View(titlengrams)
titlengrams <- ngrams(myCorpus$title, seq_along(myCorpus$title), 20)
View(titlengrams)
load("C:/Users/ABERK/Desktop/wef-2n/2n_merged_data.Rda")
View(merged_df2)
View(merged_df2)
View(merged_df2)
summary(merged_df2$date)
max(merged_df2$date)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
View(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
View(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
View(df_stories)
View(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
View(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
View(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
View(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
View(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
unique(df_stories$EarthTime_Story_Name)
sum(unique(df_stories$EarthTime_Story_Name))
count(unique(df_stories$EarthTime_Story_Name))
sum(unique(df_stories$EarthTime_Story_Name))
unique(df_stories$Insight_Area_Name)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
unique(df_stories$Insight_Area_Name)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
unique(df_stories$Insight_Area_Name)
unique(df_stories$EarthTime_Story_Name)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
Rwefsigapi::close_connection("DBI", con)
tail(df_stories)
View(df_stories)
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
#con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
con <- DBI::dbConnect(
RPostgres::Postgres(),
dbname = "earthtime",
host = "192.168.166.56",
port = 5432,
user = "aberk",
password = "password"
)
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
#Rwefsigapi::close_connection("DBI", con)
dbDisconnect(con)
tail(df_stories)
#db_table_check <- as.data.frame(dbReadTable(con, "list-stories"))
#setwd("C:/Users/ABERK/Box/Data_Science_Exploration/ABERK")
#setwd("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/")
Rwefsigapi::set_si_db_credentials("aberk", "password")
#con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
con <- DBI::dbConnect(
RPostgres::Postgres(),
dbname = "earthtime",
host = "192.168.166.56",
port = 5432,
user = "aberk",
password = "password"
)
#df_stories <- dplyr::tibble(openxlsx::readWorkbook("Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1)) #Error: Failed to fetch row: ERROR:  type "c" does not exist at character 63
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
#DBI::(dbReadTable(con, "list-stories"))
#Rwefsigapi::close_connection("DBI", con)
dbDisconnect(con)
tail(df_stories)
#db_table_check <- as.data.frame(dbReadTable(con, "list-stories"))
db_table_check <- as.data.frame(dbReadTable(con, "list-stories"))
Rwefsigapi::set_si_db_credentials("aberk", "password")
#con <- Rwefsigapi::open_si_db_connection("DBI", "earthtime")
con <- DBI::dbConnect(
RPostgres::Postgres(),
dbname = "earthtime",
host = "192.168.166.56",
port = 5432,
user = "aberk",
password = "password"
)
df_stories <- readxl::read_excel("C:/Users/ABERK/Box/Internal_ Strategic Intelligence/EarthTime/Insight_Areas_with_EarthTime_Stories.xlsx", sheet = 1, col_names = TRUE)
DBI::dbWriteTable(con, "list-stories", df_stories, overwrite = TRUE)
db_table_check <- as.data.frame(dbReadTable(con, "list-stories"))
library(DBI)
db_table_check <- as.data.frame(dbReadTable(con, "list-stories"))
View(db_table_check)
dbDisconnect(con)
saveRDS(installed.packages(), file="/tmp/pkgs.rds")
saveRDS(installed.packages(), file="pkgs.rds")
pkgs <- readRDS("pkgs.rds"); install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
pkgs <- readRDS("pkgs.rds")
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
update.packages(checkBuilt = TRUE, ask = FALSE)
install.packages("XLConnect")
install.packages("Rtools")
update.packages(checkBuilt = TRUE, ask = FALSE)
pkgs <- readRDS("pkgs.rds")
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
install.packages(rownames(pkgs))
update.packages(checkBuilt = TRUE, ask = FALSE)
update.packages(checkBuilt = TRUE, ask = FALSE)
update.packages(checkBuilt = TRUE, ask = FALSE)
SAdata <- read.csv("C:/Users/ABERK/OneDrive - World Economic Forum/Desktop/SAdata.csv")
View(SAdata)
colnames(SAdata)
unique(SAdata$Race)
pdftools::pdf_data("C:/Users/ABERK/OneDrive - World Economic Forum/Desktop/PG_2020.06.25_Global-Views-Homosexuality_TOPLINE.pdf")
global_views_on_homosexuality <- pdftools::pdf_data("C:/Users/ABERK/OneDrive - World Economic Forum/Desktop/PG_2020.06.25_Global-Views-Homosexuality_TOPLINE.pdf")
View(global_views_on_homosexuality)
library(tabulizer)
install.packages("tabulizer")
library(tabulizer)
install.packages(rJava)
install.packages("rJava")
library(tabulizer)
options(java.parameters = "-Xmx12000m")
library(tabulizer)
remove.packages("rJava", lib="~/R/win-library/4.1")
remove.packages("tabulizer", lib="~/R/win-library/4.1")
remove.packages("tabulizerjars", lib="~/R/win-library/4.1")
install.packages("rJava")
install.packages("tabulizer")
library(tabulizer)
if (!require("remotes")) {
install.packages("remotes")
}
# on 64-bit Windows
remotes::install_github(c("ropensci/tabulizerjars", "ropensci/tabulizer"), INSTALL_opts = "--no-multiarch")
library(tabulizer)
if (!require("remotes")) {
install.packages("remotes")
}
# on 64-bit Windows
remotes::install_github(c("ropensci/tabulizerjars"), INSTALL_opts = "--no-multiarch")
remove.packages("tabulizerjars", lib="~/R/win-library/4.1")
remove.packages("tabulizer", lib="~/R/win-library/4.1")
if (!require("remotes")) {
install.packages("remotes")
}
# on 64-bit Windows
remotes::install_github(c("ropensci/tabulizerjars"), INSTALL_opts = "--no-multiarch")
if (!require("remotes")) {
install.packages("remotes")
}
# on 64-bit Windows
remotes::install_github(c(""ropensci/tabulizer"), INSTALL_opts = "--no-multiarch")
if (!require("remotes")) {
install.packages("remotes")
}
# on 64-bit Windows
remotes::install_github(c(ropensci/tabulizer"), INSTALL_opts = "--no-multiarch")
if (!require("remotes")) {
install.packages("remotes")
}
# on 64-bit Windows
remotes::install_github(c("ropensci/tabulizer"), INSTALL_opts = "--no-multiarch")
if (!require("remotes")) {
install.packages("remotes")
}
# on 64-bit Windows
remotes::install_github(c("ropensci/tabulizerjars"), INSTALL_opts = "--no-multiarch")
install.packages("tabulizer")
library(tabulizer)
options(java.parameters = "-Xmx12000m")
library(tabulizer)
library(rJava)
remotes::install_github("forum-intelligence/tmvisualizer")
x <- as.Date("2018-10-01")
as.month(x)
month(x)
attr(x)
[ ] v1<-list(1,2,3)
v2<-list(c(4,5,6))
vbound<-cbind(v1,v2)
v1<-list(1,2,3)
v2<-list(c(4,5,6))
vbound<-cbind(v1,v2)
v1<-c(1,2,3)
v2<-list(4,5,6))
vbound<-cbind(v1,v2)
v1<-list(1,2,3)
v2<-list(c(4,5,6))
vbound<-cbind(v1,v2)
ls(char="V")
ls(char<-"V")
ls(pat="V")
x <- c(12L,6L,10L,8L,15L,14L,19L,18L,23L,59L)
median(x)
typeof(median(x))
url <- "https://archive.org/compress/spanishpod"
destfile <- "C:/Users/ABERK/Box/The_Definitive_ABERK_Miscellaneous/aberk_learning_award_2021/language_self_study_materials/spanish/spanishpod/"
download.file(url, destfile)
destfile <- "C:/Users/ABERK/Desktop/"
download.file(url, destfile)
destfile <- "C:/Users/ABERK/Box/The_Definitive_ABERK_Miscellaneous/aberk_learning_award_2021/language_self_study_materials/spanish/spanishpod/"
pg <- readLines(url)
url <- "https://archive.org/download/spanishpod"
pg <- readLines(url)
head(pg)
pg
url <- "https://archive.org/compress/spanishpod"
library(rvest)
pg <- read_html(url)
testing <- read.csv("C:/Users/ABERK/OneDrive - World Economic Forum/Desktop/testing.CSV", comment.char="#")
View(testing)
devtools::install_github(“rstudio/r2d3”)
install.packages("devtools")
devtools::install_github(“rstudio/r2d3”)
devtools::install_github('rstudio/r2d3')
library("EarthTimeR")
setwd(file.path(Sys.getenv('my_dir'),'2019/01/Innovate_UK/'))
UK <- read.csv("innovate_UK_clean_14-01-2019.csv", stringsAsFactors=FALSE)
UK <- UK[, -c(1:2, 6)]
UK2 <- UK[1:500,1:4]
test <- choropleth(UK, "Competition_Year", "Grant_Offered_.GBP.")
generate_csv_layer_row(Share_Link_Identifier = "arizona_migrant_all_deaths", Category = "International Migrants", Name = "Arizona Migrant Mortality - All", Credits = "Arizona OpenGIS Initiative for Deceased Migrants", Start_Date = "1981", End_Date = "2021", URL = "ss", Scaling = "sqrt", Map_Type = "point", Color = "(0.0,0.0,0.0)", Legend_Content = "auto", Legend_Key = "Migrant Death", Colormap_Src = "alice_cornflower_blue")
df <- `csv_sheet_row-arizona_migrant_all_deaths`
append_new_data_layer_to_CSV_layers  <- function(ss, csv_layer, sheet = "CSV Layers"){
googlesheets4::sheet_append(ss, data = csv_layer, sheet = "CSV Layers")
}
append_new_data_layer_to_CSV_layers("1walgLKJooOOk0MDpXCni8tgSKMncgZQDWER3H4SoosA", df)
View(`csv_sheet_row-arizona_migrant_all_deaths`)
generate_csv_layer_row(Share_Link_Identifier = "arizona_migrant_all_deaths", Category = "International Migrants", Name = "Arizona Migrant Mortality - All", Credits = "Arizona OpenGIS Initiative for Deceased Migrants", Start_Date = "1981", End_Date = "2021", URL = "https://docs-proxy.cmucreatelab.org/spreadsheets/d/1xxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-xxx/export?format=csv&gid=0123456789", Scaling = "sqrt", Map_Type = "point", Color = "(0.0,0.0,0.0)", Legend_Content = "auto", Legend_Key = "Migrant Death", Colormap_Src = "alice_cornflower_blue")
df <- `csv_sheet_row-arizona_migrant_all_deaths`
append_new_data_layer_to_CSV_layers("1walgLKJooOOk0MDpXCni8tgSKMncgZQDWER3H4SoosA", df)
append_new_data_layer_to_CSV_layers("1walgLKJooOOk0MDpXCni8tgSKMncgZQDWER3H4SoosA", df)
tidycensus::census_api_key()
library(tidycensus)
UseMethod(census_api_key())
UseMethod("census_api_key"
)
getAnywhere("census_api_key")
.rs.restartR()
library("devtools")
library("roxygen2")
library("devtools")
library("roxygen2")
setwd("C:/Users/ABERK/Box/The_Definitive_ABERK_Data_Science_Folder")
setwd("./EarthTimeR")
document()
